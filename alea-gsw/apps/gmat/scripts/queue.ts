/**
 * Adds a GMAT job to the queue
 */

import { Queue } from "bullmq";

const queue = new Queue("gmat", {
  connection: {
    host: "100.118.72.59",
    port: 6379,
  },
});

const inputData = [
  [
    "ab0d2242-bca1-49b5-a78d-0c968d036947",
    {
      x: 4679.806329900379,
      y: -4973.093291658213,
      z: -0.0003913415953835786,
      vx: -0.7196019153772706,
      vy: -0.6734699468508896,
      vz: 7.575258113565158,
      type: "cartesian",
    },
    "BDSAT-2",
    1725505707773,
    "2024-09-05 03:08:27+00",
    "1 55098U 23001CT  24249.13087701  .00080280  00000+0  19129-2 0  9992",
    "2 55098  97.4181 313.2597 0010450 224.7689 135.2715 15.41237375 93135",
  ],
  [
    "26602791-f3b4-44c8-8b73-816a87fe7d1b",
    {
      x: 4853.826161232455,
      y: -4802.624263362153,
      z: 0.0004244654487310191,
      vx: -0.6954053427493632,
      vy: -0.6982928820636494,
      vz: 7.575344715066744,
      type: "cartesian",
    },
    "BDSAT-2",
    1725679585386,
    "2024-09-07 03:26:25+00",
    "1 55098U 23001CT  24251.14334938  .00081605  00000+0  19234-2 0  9992",
    "2 55098  97.4173 315.3038 0010463 219.9377 140.1101 15.41560804 93447",
  ],
  [
    "b97b9793-dab3-4476-902c-7c90644b3b53",
    {
      x: 6543.898205020467,
      y: -1896.645562390436,
      z: -0.003265895313423825,
      vx: -0.2883529239944826,
      vy: -0.9429800884729767,
      vz: 7.584584596083555,
      type: "cartesian",
    },
    "BDSAT-2",
    1728098942769,
    "2024-10-05 03:29:02+00",
    "1 55098U 23001CT  24279.14517094  .00129532  00000-0  25974-2 0  9999",
    "2 55098  97.4120 343.8366 0009946 126.6311 233.5854 15.46175438 97766",
  ],
] as const;

await queue.add("gmat", {
  epochFormat: "UTCGregorian",
  epoch:
    // To this format: 09 Aug 2024 03:45:21.893
    // 09 Aug 2024
    new Date(inputData[0][3]).toUTCString().slice(5, 17) +
    // 03:45:21.893
    new Date(inputData[0][3]).toISOString().slice(11, -1),
  coordinateSystem: "EarthMJ2000Eq",
  stateElement: inputData[0][1],
  stateId: inputData[0][0],
});
